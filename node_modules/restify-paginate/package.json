{
  "name": "restify-paginate",
  "version": "0.0.2",
  "description": "A resitfy a middleware that helps the navigation between pages.",
  "main": "index.js",
  "scripts": {
    "test": "mocha",
    "coverage": "istanbul cover ./node_modules/.bin/_mocha && ./node_modules/.bin/istanbul report clover"
  },
  "repository": {
    "type": "git",
    "url": "git+ssh://git@github.com/paulvarache/restify-paginate.git"
  },
  "keywords": [
    "restify",
    "paginate",
    "middleware",
    "hypermedia",
    "headers"
  ],
  "author": {
    "name": "Paul Varache"
  },
  "license": "ISC",
  "bugs": {
    "url": "https://github.com/paulvarache/restify-paginate/issues"
  },
  "homepage": "https://github.com/paulvarache/restify-paginate#readme",
  "dependencies": {
    "extend": "^3.0.0"
  },
  "devDependencies": {
    "istanbul": "^0.3.18",
    "mocha": "^2.2.5",
    "request-promise": "^0.4.3",
    "restify": "^4.0.0",
    "should": "^7.0.4"
  },
  "readme": "# restify-paginate\n--------------------------\n\nresitfy-paginate is a middleware that helps the navigation between pages.\n\nWhen you have a very large set of results to display, you might want to divide it into pages. So when you ask for your resource, you get a portion of the result set aka a `page` and the possibility to get the other pages.\n\nNow the question is: \"I have my first page, how can I get to ther other ones ?\".\nThe idea is to not send only the page itself but also the links to the others.\n\nLet's say you get your resource from this URL: `http://api.mysite.com/api/myresource`, you will be able to get the different pages adding the `page` and `per_page` param e.g. `http://api.mysite.com/api/myresource?page=3&per_page=20`\n\nThis module processes the request params and generates the links to the first, previous, next and last pages of the result set.\n\nBy default this module will generate links like the github API c.f.  [Github Documentation](https://developer.github.com/guides/traversing-with-pagination/), the page count will start at 1 and the page size will be 50.\n\n## Get the module\n\nThis module is registered on npm so you just need to get it doing:\n\n```shell\nnpm install restify-paginate\n```\n\n## Using the module\n\nFirst you require the module and then add it as one of your server middlewares.\n\n*You have to give the restify server object to the paginate module*\n\n```js\nvar restify = require('restify'),\n    paginate = require('restify-paginate');\n\nvar server = restify.createServer({\n        name: 'My API'\n    });\n\nserver.use(restify.queryParser());\nserver.use(paginate(server));\n\n```\n\nThis will process the `page` and `per_page` request params and add them in the request object under the `paginate` key.\n\nYour request object will have something like this:\n\n```json\n    {\n        params: {...},\n        paginate: {\n            page: 2,\n            per_page: 30\n        },\n        ...\n    }\n```\n\nSo now you can use this information to make your database query\n\n```js\n    // SQL like query\n    var query = 'SELECT * FROM my_table'\n                + 'OFFSET ' + (req.paginate.page * req.paginate.per_page)\n                + ' LIMIT ' + req.params.per_page;\n    // Mongoose like query\n    Potatoes.find()\n            .offset(req.paginate.page * req.paginate.per_page)\n            .limit(req.params.per_page);\n```\n\nIt will also add a `paginate` object in the response object that contains two functions that can be used to either get the pages links or add them to the response headers.\n\nYou can now get your links based on the total count of your result set\n\n```js\n// Let's say your query would have returned 54356 results without the offset and limit clauses\nvar links = res.paginate.getLinks(54356);\n```\n\nThis will give you:\n\n```js\n{\n    next: 'http://api.myurl.com/myresource?page=2',\n    last: 'http://api.myurl.com/myresource?page=1088',\n}\n```\n\nHere the next page is the second one and the last is the 1088th one because you need to get to the 1088th page to get the last results.\n\nThe `first` and `prev` keys are not added since the page asked is the first one.\n\n## Options\n\nYou can change this module behavior through some options by giving them to the paginate module.\n\n```js\n    var options = {...};\n    server.use(paginate(server, options));\n```\n\nBy default these options are:\n\n```js\n{\n    paramsNames: {\n        page: 'page',           // Page number param name\n        per_page: 'per_page'    // Page size param name\n    },\n    defaults: {                 // Default values\n        page: 1,\n        per_page: 50\n    },\n    numbersOnly: false,         // Generates the full links or not\n    hostname: true              // Adds the hostname in the links or not\n}\n```\n\n### paramsName\n\nYou can choose the names of the request params for the page number and the page size.\n\nSo you can have URLs like this `http://api.mysite.com/resource?pageCount=2&pageSize=35` by setting the defaults options to:\n\n```js\n{\n    page: 'pageCount',\n    per_page: 'pageSize'\n}\n```\n\n#### defaults\n\nYou can change the dafult values for the page number and the page size. If these informations are not provided in the request, these values will be used.\n\n### numbersOnly\n\nIndicates if the urls should be generated or if you only need the pages numbers. If set to true, the links will look like this:\n\n```\n{\n    first: 1,\n    prev: 2,\n    next: 4,\n    last: 57\n}\n```\n\n### hostname\n\nindicates if the hostname should be in the generated URLs. If set to false, the URLs will look like this `/myresource?page=2`\n\n## Functions reference\n\n### paginate(server, options)\n\nInitialize the paginate module.\n\n**params**:\n- server: The restify server object\n- options: Your custom options\n\n\n### res.paginate.getLinks(count)\n\n**params**:\n- count: The total number of results\n\nReturns an object containing the pages.\n\n### res.paginate.addLinks(count)\n\n**params**:\n- count: The total number of results\n\nAdd a `Link` header to the response that contains the pages.\n",
  "readmeFilename": "README.md",
  "_id": "restify-paginate@0.0.2",
  "_shasum": "0301323d9d4259e9bb2c11aa37dbc9fba0528aa2",
  "_from": "restify-paginate@",
  "_resolved": "https://registry.npmjs.org/restify-paginate/-/restify-paginate-0.0.2.tgz"
}
